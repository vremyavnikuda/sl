
# Документация основного приложения

## Назначение
Данный код реализует терминальный MP3-плеер с использованием библиотеки **ncurses** для управления интерфейсом и обработки пользовательского ввода. Плейлист MP3-файлов загружается из директории, указанной в конфигурационном файле, и затем воспроизводится в цикле.

## Внутренняя логика

1. **Чтение конфигурационного файла**:
   - Путь к файлу конфигурации: `sl.conf`.
   - Функция `get_music_directory_from_config` используется для извлечения пути к музыкальной директории из конфигурационного файла.

2. **Получение плейлиста**:
   - Функция `get_playlist` читает директорию с музыкой и возвращает список MP3-файлов в виде вектора строк.

3. **Инициализация глобальных переменных**:
   - `playing`: Управляет паузой/продолжением воспроизведения.
   - `stop_playing`: Останавливает текущий трек и переходит к следующему.
   - `exit_flag`: Управляет завершением программы.

4. **Запуск потоков**:
   - Поток `player_thread` воспроизводит треки в плейлисте с использованием функции `play_playlist`.

5. **Инициализация ncurses**:
   - `initscr()`: Инициализирует экран для работы с ncurses.
   - Включение неблокирующего режима `nodelay(stdscr, TRUE)` позволяет использовать `getch()` для обработки ввода без блокировки программы.

6. **Обработка ввода в основном цикле**:
   - Цикл работает, пока флаг `running` установлен в `true`.
   - Внутри цикла происходит обработка следующих команд:
     - **'n'**: Переход к следующему треку.
     - **'r'**: Возврат к предыдущему треку.
     - **' '**: Пауза или продолжение воспроизведения.
     - **'q'**: Завершение работы программы.
     - **KEY_UP**: Перемещение на предыдущий трек в плейлисте.
     - **KEY_DOWN**: Перемещение на следующий трек.
     - **ENTER**: Воспроизведение выбранного трека.

7. **Интерфейс**:
   - В каждой итерации цикла вызывается функция `display_interface`, которая обновляет отображение плейлиста и текущего трека на экране терминала.

8. **Завершение программы**:
   - Программа завершается, если пользователь нажимает 'q'. Функция `endwin()` завершает работу ncurses, и основной поток ждет завершения потока, воспроизводящего музыку.

## Пример использования
Этот код реализует текстовый MP3-плеер для терминала. После запуска программы треки из плейлиста будут воспроизводиться, а пользователь может управлять воспроизведением с помощью клавиш:
- 'n' — следующий трек
- 'r' — предыдущий трек
- ' ' — пауза/продолжить
- 'q' — выйти
- Стрелки — выбор трека
- Enter — воспроизведение выбранного трека.
